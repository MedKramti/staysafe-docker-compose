CREATE TABLE locations (
    id bigint NOT NULL,
    lng double precision,
    lat double precision,
    street character varying(128),
    city character varying(64),
    state character varying(64),
    postcode character varying(8),
    country character varying(56)
);

ALTER TABLE locations ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME locations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);

CREATE TABLE shelters (
    id bigint NOT NULL,
    name character varying(128),
    description character varying(256),
    capacity integer,
    added_by character varying(50),
    added_date date,
    approved boolean,
    location_id bigint
);

ALTER TABLE shelters ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME shelters_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 50
);

ALTER TABLE ONLY locations
    ADD CONSTRAINT locations_pkey PRIMARY KEY (id);



ALTER TABLE ONLY shelters
    ADD CONSTRAINT shelters_pkey PRIMARY KEY (id);


ALTER TABLE ONLY shelters
    ADD CONSTRAINT fk_location FOREIGN KEY (location_id) REFERENCES locations(id) ON DELETE CASCADE;

COPY locations (id, lng, lat, street, city, state, postcode, country) FROM stdin;
420	38.924614	49.146089	10-A Sadova Street	Shul'hynka	Starobilskyi	92764	Ukraine
430	39.1553842	49.0391298	Sovetska Street, Building 1B	Village Oleksiyivka	Novoaidars'kyi district	72333	Ukraine
440	38.579035	49.080292	Lenina Street, Building 1a	Village Epifanivka	Kreminskyi	92942	Ukraine
450	38.907472	49.270585	Vatutina Quarter, Building 68	Starobilsk	Starobilskyi	92701	Ukraine
460	38.267219	49.216753	Krasnorichenske	Krasnorichens'ke	Kreminskyi	92913	Ukraine
470	38.205614	49.222934	-	Krasnorichens'ke	Kreminskyi	92913	Ukraine
480	38.062611	49.6922	Village Verkhnya Duvanka	Verkhnya Duvanka	Svativskyi	92610	Ukraine
490	39.0561927	48.2432	Central Street, 1	Bakhmutivka	Novoaidars'kyi	91000	Ukraine
500	40.07325	49.25866666666667	Village Zhuravs'ke	Zhuravs'ke	Milovskyi	92542	Ukraine
510	34.84127	50.894832	Kharkivs'ka St	Sumy	Sums'ka oblast	40000	UA
520	34.7775936	50.8955895	20-richchya Peremohy St, 13	Sumy	Sums'ka oblast	40000	UA
\.

COPY shelters (id, name, description, capacity, added_by, added_date, approved, location_id) FROM stdin;
1302	Shulhynskyi lyceum	Shulginska ambulatory	400	admin	2023-11-12	t	420
1303	Novoaidar	Oil Pumping Station	50	admin	2023-11-12	t	430
1304	Epifanivska Secondary School	Secondary school	250	admin	2023-11-12	t	440
1305	Employment Center	Employment Center	205	admin	2023-11-12	t	450
1306	Branch of ATZT	Lysychansk Poultry Farm	150	admin	2023-11-12	t	460
1307	Agropromtechnika	Agro-industrial institution	100	admin	2023-11-12	t	470
1308	Secondary School	Secondary School	200	admin	2023-11-12	t	480
1309	Bakhmutivska School	Bakhmutivska General Educational School	200	admin	2023-11-12	t	490
1310	Nibulon	SP Nibulon	150	admin	2023-11-12	t	500
1351	Protective Structure	Protective Structure	300	admin	2023-11-12	t	510
1352	Shelter Anniversary of Victory	20th Anniversary of Victory	100	admin	2023-11-12	t	520
\.



